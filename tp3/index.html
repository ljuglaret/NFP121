<html>
<head>
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
    <title>NFP121 - TP1</title>
    <style type="text/css">
        body {
            background: #E5DED6;
            background-color: #fff;
            color: #333333;
            font-size: 14px;
            font-family: Verdana, Arial;
        }

        table {
            font-size: 20px;
            border-color: #808080;
            border-style: solid;
            border-width: 1px;
        }

        h2 {
            color: #C1002A;
            font-family: Verdana, Arial;
            font-size: 30px;
            font-weight: bold;
        }

        h3 {
            color: #C1002A;
            font-family: Verdana, Arial;
            font-size: 20px;
            font-weight: bold;
        }
        
        hr {
            margin: 15px 0 15px 0;
        }
		
		applet {
			margin: 10px 0px 25px 250px;
			border-width: 1px;
			border-style: solid;
			border-color: #777777;
		}
		
    </style>

</head>
<body>
    <h2 style="text-align: center">NFP 121 - TP3</h2>
    <h2 style="text-align: center">Les piles</h2>
    <br />
    <hr>
    <br />
    <table>
        <tr>
            <td>Nom
            </td>
            <td>Juglaret
            </td>
        </tr>
        <tr>
            <td>Prénom
            </td>
            <td>Laure
            </td>
        </tr>
        <tr>
            <td>Matricule
            </td>
            <td>0G5DRL8UNZ3
            </td>
        </tr>
    </table>
		
	<br />
    <hr />
    <h3>Question 1.1</h3>
    <h4>Classe Pile</h4>
    <p>Cette classe contient deux constructeurs Pile() et Pile(taille).</p>
    <p>
        Le premier initialise une pile vide d'une capacité égale à la capacité
        par défaut.
    </p>
    <p>
        Le second initialise une pile de capacité égale à la capacité par défaut si taille fournie en paramètre  est strictement positive,
        sinon  initialise une pile vide d'une capacité égale à la capacité par défaut.
    </p>
   
    <p><a href = "https://github.com/ljuglaret/NFP121/blob/gh-pages/tp3/question1/Pile0.java" >Source</a></p>
    <h4>Classe IHM</h4>
    
     <p>
        public IHMPile(){..}
    <br>Initialise une IHM avec : 
     <li>Deux boutons : boutonEmpiler boutonDepiler</li>
     <li>Un JLabel :  contenu représentant la pile, initalisé ) []</li>
     <li>Un JTextField : donnee pour saisir un texte à empiler</li>
     <li>Un JTextField : sommet dans lequel se trouve le sommet de la pile </li>
    </p>  
 
    <a href = "https://github.com/ljuglaret/NFP121/blob/gh-pages/tp3/question1/IHMPile.java" >Source</a>

    <br />
    <hr />
    <h3>Question 1.2</h3>

            <pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:Courier New, Courier, monospace; overflow: auto;'><span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>static</span> <span style='font-weight:bold;color:#7B0052;'>void</span> main(String[] args) <span style='font-weight:bold;color:#7B0052;'>throws</span> Exception <span style='font-weight:bold;color:#D3171B'>{</span>
                Pile p1 = <span style='font-weight:bold;color:#7B0052;'>new</span> Pile(6);
                Pile p2 = <span style='font-weight:bold;color:#7B0052;'>new</span> Pile(10);
                <span style='color:#3F7F5F'>//p1 est ici une pile de polygones réguliers PolygoneRegulier.java
</span>        
                p1.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> PolygoneRegulier(5, 100));
                p1.empiler(<span style='color:#2A00FF'>"polygone"</span>);
                p1.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> Integer(100));
                System.out.println(<span style='color:#2A00FF'>" la pile p1 = "</span> + p1); <span style='color:#3F7F5F'>// Quel est le résultat ? (1)
</span>        
                p2.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> Integer(1000));
                p1.empiler(p2);
                System.out.println(<span style='color:#2A00FF'>" la pile p1 = "</span> + p1); <span style='color:#3F7F5F'>// Quel est le résultat ? (2)
</span>        
                <span style='font-weight:bold;color:#7B0052;'>try</span> <span style='font-weight:bold;color:#D3171B'>{</span>
                    p1.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> PolygoneRegulier(4,100));
                   
                   String s = (String) p1.depiler(); <span style='color:#3F7F5F'>// vérifiez qu'une exception se
</span>                                                        <span style='color:#3F7F5F'>// produit (3)
</span>                p1.depiler();
                <span style='font-weight:bold;color:#D3171B'>}</span> <span style='font-weight:bold;color:#7B0052;'>catch</span> (Exception e) <span style='font-weight:bold;color:#D3171B'>{</span>
                    e.printStackTrace();
                <span style='font-weight:bold;color:#D3171B'>}</span> 
            <span style='font-weight:bold;color:#D3171B'>}</span></pre>

        <p>
            (1) :  la pile p1 = [100, polygone, <5,100>]
        </p>
        <p>
            (2) :  la pile p1 = [[1000], 100, polygone, <5,100>]  
        </p>
      
        <p>  
            (3) : Une exception se produit. 
            <br>En effet l'instruction p1.depiler() retourne un Polygone Regulier(le type de l'objet se trouvant au sommet), 
            lequel ne peut pas être casté en String, ce qui déclenchera une erreur au runtime.
        </p>
     

    

    <br />
    <hr />
    <h3>Question 2.1 : Modifiez la classe Pile pour qu'elle implémente maintenant l'interface PileI</h3>
    <h4>Classe Pile</h4>
    <a href = "https://github.com/ljuglaret/NFP121/blob/gh-pages/tp3/question1/Pile0.java" >Source</a>

    Changements par rapport à sa version précédente : ajout du mot clef implements, et définitions des nouvelles méthodes : equals, sommet, taille, capacite, hashCode (fournit).


    <br />
    <hr />
    <h3>Question 2.2 : Implémenter une interface</h3>
    <h4>
        Pile : Pile de la question 1
    </h4>
        <a href = "https://github.com/ljuglaret/NFP121/blob/gh-pages/tp3/question2/Pile.java" >Source</a>
   
    <h4>
        Pile2 : java.util.Stack<E>
    </h4>
    La documentation java fournit les méthodes suivantes : 
    <li>    E push(E item) : ajoute item au sommet de la pile</li>
    <li>    E pop() : retourne le sommet de la pile et le retire de la pile</li>
    <li>    E peek() : retourne le sommet de la pile </li>
    <li>
        boolean empty() : teste si la pile est vide </li>
    <a href = "https://github.com/ljuglaret/NFP121/blob/gh-pages/tp3/question2/Pile2.java" >Source</a>
 
    <h4>
        Pile3 : java.util.Vector<E>
    </h4>
    La documentation java fournit les méthodes suivantes : 
    <li>    int capacity() : retourne la capacité du vecteur</li>
    <li>    int size() : retourne le nombre de composants du vecteur</li>
    <li>    boolean isEmpty() : teste si le vecteur n'a pas de composants</li>

        <a href = "https://github.com/ljuglaret/NFP121/blob/gh-pages/tp3/question2/Pile3.java" >Source</a>
  
    <h4>
        Pile4 : liste chaînée créée en interne
    </h4>
        <a href = "https://github.com/ljuglaret/NFP121/blob/gh-pages/tp3/question2/Pile4.java" >Source</a>
   

    <br />
    <hr />
    <h3>Question 2.3</h3>
   
   <li> <a href = "https://github.com/ljuglaret/NFP121/blob/gh-pages/tp3/question2/PileTest.java" >Tests Pile</a></li>
   <li>  <a href = "https://github.com/ljuglaret/NFP121/blob/gh-pages/tp3/question2/Pile2Test.java" >Tests Pile2</a></li>
   <li> <a href = "https://github.com/ljuglaret/NFP121/blob/gh-pages/tp3/question2/Pile3Test.java" >Tests Pile3</a></li>
   <li>  <a href = "https://github.com/ljuglaret/NFP121/blob/gh-pages/tp3/question2/Pile4Test.java" >Tests Pile4</a></li>


    <br />
    <hr />
    <h3>Question 2.4 : Tests Unitaires "PilesAuMemeComportement"</h3>
    <a href = "https://github.com/ljuglaret/NFP121/blob/gh-pages/tp3/question2/PilesAuMemeComportement.java" >Source</a>

    <br />
    <hr />
    <h3>Question 2.5</h3>

    <pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:Courier New, Courier, monospace; overflow: auto;'><span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>boolean</span> equals(Object o) <span style='font-weight:bold;color:#D3171B'>{</span>
        <span style='font-weight:bold;color:#7B0052;'>if</span> (o <span style='font-weight:bold;color:#7B0052;'>instanceof</span> PileI) <span style='font-weight:bold;color:#D3171B'>{</span>
          PileI p = (PileI) o;
          <span style='font-weight:bold;color:#7B0052;'>return</span> this.capacite() == p.capacite()
              && this.hashCode() == p.hashCode();
        <span style='font-weight:bold;color:#D3171B'>}</span> <span style='font-weight:bold;color:#7B0052;'>else</span>
          <span style='font-weight:bold;color:#7B0052;'>return</span> <span style='font-weight:bold;color:#7B0052;'>false</span>;
        <span style='font-weight:bold;color:#D3171B'>}</span></pre>
 
    
        <p>
            La méthode hashCode() telle que définie dans les classes Pile Pile2 Pile3 et Pile4 de la question 2 convertit chaque objet en String puis appelle
            la métode de Hash de la classe String, donc elle renvoie vrai au test ("1","2","3") == (1,2,3).
        </p>
        <p>
            De plus, si deux objets sont les mêmes alors leur hash sont égaux, mais l'égalité entre deux hash n'implique pas l'égalité entre objets.
            
            </p>
        <p>
            Enfin,  le critère de capacité n'est pas suffisant.
            <br> Soit par exemple p1(5) et p2(5) deux piles de capacité 5 telles que p1 = ("1 ","2") et p2 = ("1"," ", "2").
            <br>Les égalités p1.capacite() == p2.capacite() et p1.hashCode() == p2.hashCode(); sont bien vérifiées mais les piles ne sont pas égales.
        </p>  
           
        <pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:Courier New, Courier, monospace; overflow: auto;'><span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>boolean</span> equals(Object o) <span style='font-weight:bold;color:#D3171B'>{</span>
            <span style='font-weight:bold;color:#7B0052;'>return</span> this.toString().equals(o.toString());
        <span style='font-weight:bold;color:#D3171B'>}</span></pre>

        Cette autre réponse, élégante, n'est pas correcte car l'égalité concerne juste l'affichage des valeurs.
        <br>
         Il manque les vérifications sur :
        <li>
            la capacité
        </li>
        <li>
            la taille
        </li>
        <li>
            le type
        </li>

    <br />
    <hr />
    <h3>Question 3.1 : Généricité : un premier usage</h3>

    <br />
    <hr />
    <h3>Question 3.2 : La classe UneUtilisation</h3>
   
    <pre style='text-align: left; border: 1px dashed #008DEF; line-height: 18px; padding: 15px; font-size: 13px; font-family:Courier New, Courier, monospace; overflow: auto;'><span style='font-weight:bold;color:#7B0052;'>public</span> <span style='font-weight:bold;color:#7B0052;'>static</span> <span style='font-weight:bold;color:#7B0052;'>void</span> main(String[] args) <span style='font-weight:bold;color:#7B0052;'>throws</span> Exception <span style='font-weight:bold;color:#D3171B'>{</span>
        <span style='color:#3F7F5F'>// declaration de p1 et initialisation (p1 est ici une pile de polygones réguliers PolygoneRegulier.java)
</span>        PileI&lt;PolygoneRegulier&gt; p1 = <span style='font-weight:bold;color:#7B0052;'>new</span> Pile2(7);
        <span style='color:#3F7F5F'>// declaration de p1 et initialisation (p1 est ici une pile de polygones réguliers PolygoneRegulier.java)
</span>        PileI&lt;List&lt;PolygoneRegulier&gt;&gt; p2 = <span style='font-weight:bold;color:#7B0052;'>new</span> Pile2(7);
        
        p1.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> PolygoneRegulier(4, 100));
        p1.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> PolygoneRegulier(5, 100));
        PileI p3= <span style='font-weight:bold;color:#7B0052;'>new</span> Pile2(12);
        p3.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> PolygoneRegulier(5, 200));
        p3.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> PolygoneRegulier(8, 150));
        p3.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> PolygoneRegulier(9, 150));
        p3.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> PolygoneRegulier(10, 150));
        p3.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> PolygoneRegulier(11, 150));
        p3.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> PolygoneRegulier(12, 150));
        p3.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> PolygoneRegulier(13, 150));
        p3.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> PolygoneRegulier(14, 150));
        p3.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> PolygoneRegulier(15, 150));

        p3.depiler();
        p3.depiler();
        p3.depiler();
        p3.depiler();
        p3.depiler();
        p3.depiler();

        PileI p4= <span style='font-weight:bold;color:#7B0052;'>new</span> Pile2(7);
        p4.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> PolygoneRegulier(7, 150));

        System.out.println(<span style='color:#2A00FF'>" la pile p1 = "</span> + p1);
        <span style='color:#3F7F5F'>// p2 ne contient que des piles de polygones réguliers
</span>        <span style='color:#3F7F5F'>//p2.empiler(p1);
</span>        System.out.println(<span style='color:#2A00FF'>" la pile p2 = "</span> + p2);

        <span style='font-weight:bold;color:#7B0052;'>try</span> <span style='font-weight:bold;color:#D3171B'>{</span>
            p1.empiler(<span style='font-weight:bold;color:#7B0052;'>new</span> PolygoneRegulier(5,10)); <span style='color:#3F7F5F'>// vérifiez qu'une erreur est levée à la compilation
</span>            <span style='color:#3F7F5F'>//String s = (String)p1.depiler();
</span>        <span style='font-weight:bold;color:#D3171B'>}</span> <span style='font-weight:bold;color:#7B0052;'>catch</span>(Exception e ) <span style='font-weight:bold;color:#D3171B'>{</span>
            System.out.println(<span style='color:#2A00FF'>"erreur"</span>);
            e.printStackTrace();
        <span style='font-weight:bold;color:#D3171B'>}</span>
    <span style='font-weight:bold;color:#D3171B'>}</span></pre>
    
    <p>Dans ce contexte, p1 est une pile de PolygoneRegulier.
        <br> Donc l'instruction String s = (String)p1.depiler(); déclenchera une erreur la compilation puisque le sommet
        de p1 est un PolygoneRegulier et ne peut être casté en String.
</p>
<p>
    C'est la même chose pour l'instruction p2.empiler(p1); qui déclenchera une erreur la compilation puisque p1 est une pile de PolygoneRegulier mais p2 est une pile de List<PolygoneRegulier>
</p>

    <p><a href = "https://github.com/ljuglaret/NFP121/blob/gh-pages/tp3/question3/UneUtilisation.java">Source</a></p>

    <br />
    <hr />
   
        <h3>Conclusion, biliographie et remarques :</h3>
        <a href="https://github.com/ljuglaret/NFP121/tree/gh-pages/tp3" >Sources</a>
</body>
</html>
